/*---------------------------------------------------------------------------------
	fCarousel by FRO1D
	Author: Andrey Litvinov (FRO1D)
	Version: 2.5
---------------------------------------------------------------------------------*/
(function(b){"use strict";b.fn.fCarousel=function(G){var x=b.extend({visibleItems:1,separation:200,distance:200,sideItemsAlign:0,perspective:0,orientation:"horizontal",responsive:{},opacity:1,centerItem:0,centerClass:"carousel_center",speed:300,easing:"ease-out",itemsNav:!0,keyboardNav:!0,arrows:!1,arrowsText:["",""],arrowsClass:["","",""],swipe:!0,mousewheel:!1,autoplay:!1,stopOnHover:!0,beforeChange:b.noop,onChange:b.noop,afterChange:b.noop,clickedCenter:b.noop},G);return this.each(function(){function f(a,c){var b={};b["-webkit-"+a]=c;b["-moz-"+a]=c;b["-ms-"+a]=c;b["-o-"+a]=c;b[a]=c;return b}function y(a){function l(m){clearInterval(r);c.hasClass("inited")&&a.beforeChange(c,c.find("."+a.centerClass));var g=m.index();t=0<m.index()?m.prev():e.eq(e.length-1);q=m.index()<e.length-1?m.next():e.eq(0);c.data({items:e.length,centerItem:m,prevItem:t,nextItem:q});m.data("newPos",h);for(var d=g-1,f=1;;d--,f++)if(f<=h)0<=d?e.eq(d).data("newPos",h-f):e.eq(e.length+d).data("newPos",h-f);else if(f>h&&0<=d)for(var k=d;k>=h-(e.length-g-1);k--)e.eq(k).data("newPos",2*h+1);else break;d=g+1;f=1;for(var p=0;;d++,f++)if(f<=h)d<=e.length-1?e.eq(d).data("newPos",h+f):(e.eq(p).data("newPos",h+f),p++);else if(f>h&&d<=e.length-1)for(k=d;k<=e.length-1-(h-g);k++)e.eq(k).data("newPos",2*h+1);else break;e.each(function(){var d=b(this),e=b(this).find('a, [role="button"], [role="tab"]');if(d[0]!=m[0])e.attr("tabindex",-1).on("click",function(){if(c.hasClass("inited")&&!d.hasClass(a.centerClass)&&a.itemsNav)return l(d),!1});else e.attr("tabindex",0)});e.each(function(){b(this).css(w[b(this).data("newPos")])});if(c.hasClass("inited"))a.onChange(c);setTimeout(function(){e.removeClass(a.centerClass).attr("aria-hidden","true");m.addClass(a.centerClass).attr("aria-hidden","false");c.hasClass("inited")?a.afterChange(c,m):(c.addClass("inited").attr({"aria-live":"off","aria-orientation":a.orientation}).on("focus",function(){b(this).attr("aria-live","polite")}).on("blur",function(){b(this).attr("aria-live","off")}),a.keyboardNav&&c.attr("tabindex",0));n&&v()},a.speed)}function v(){clearInterval(r);r=setInterval(function(){l(q)},n)}c.css(b.extend({position:"relative"},f("perspective",800)));e.css(b.extend({margin:"auto",position:"absolute",left:0,right:0,top:0,bottom:0},f("transition-property","transform, opacity"),f("transition-duration",a.speed+"ms"),f("transition-timing-function",a.easing),f("transition-delay","0s")));for(var h=a.visibleItems,w=[],d,k,p,g=0;g<h;g++)d=-(a.separation*(h-g)),p=-(a.distance*(h-g)),k=a.sideItemsAlign*(h-g),"horizontal"==a.orientation?(d="translate3d("+d+"px,"+k+"px,"+p+"px)",k="rotateY("+a.perspective+"deg)"):(d="translate3d("+k+"px,"+d+"px,"+p+"px)",k="rotateX("+a.perspective+"deg)"),d=b.extend({opacity:a.opacity,zIndex:g+1},f("transform-origin","0 50%"),f("transform",d+" "+k)),w.push(d);d=b.extend({opacity:1,zIndex:h+1},f("transform-origin","50% 50%"),f("transform","translate3d(0px,0px,0px)"));w.push(d);for(g=0;g<h;g++)d=a.separation*(g+1),p=-(a.distance*(g+1)),k=a.sideItemsAlign*(g+1),"horizontal"==a.orientation?(d="translate3d("+d+"px,"+k+"px,"+p+"px)",k="rotateY(-"+a.perspective+"deg)"):(d="translate3d("+k+"px,"+d+"px,"+p+"px)",k="rotateX(-"+a.perspective+"deg)"),d=b.extend({opacity:a.opacity,zIndex:h-g},f("transform-origin","100% 50%"),f("transform",d+" "+k)),w.push(d);d=b.extend({opacity:0,zIndex:0},f("transform-origin","50% 50%"),f("transform","translate3d(0px,0px,"+-(a.distance*h)+"px)"));w.push(d);var t,q;g=0==a.centerItem?e.eq(Math.floor(e.length/2)):e.eq(a.centerItem-1);l(g);e.on("click",function(){b(this).hasClass(a.centerClass)?a.clickedCenter(c,b(this)):a.itemsNav&&c.hasClass("inited")&&l(b(this))});if(a.keyboardNav){var x="horizontal"==a.orientation?37:38,y="horizontal"==a.orientation?39:40,C=e.eq(0),D=e.eq(e.length-1);c.on("keydown",function(a){if(a.which==x)return l(t),!1;if(a.which==y)return l(q),!1;if(36==a.which)return l(C),!1;if(35==a.which)return l(D),!1})}a.arrows&&(c.append('<a href="#" class="arrow '+a.arrowsClass[0]+" "+a.arrowsClass[1]+' prev" role="button" aria-label="<<">'+a.arrowsText[0]+"</a>"),c.append('<a href="#" class="arrow '+a.arrowsClass[0]+" "+a.arrowsClass[1]+' next" role="button" aria-label=">>">'+a.arrowsText[1]+"</a>"),c[0].hasAttribute("id")&&c.children(".arrow").attr("aria-controls",c.attr("id")),a.keyboardNav&&c.children(".arrow").attr("tabindex",-1),c.children(".arrow").on("click",function(){b(this).hasClass("prev")?l(t):l(q);return!1}).on("focus",function(){c.attr("aria-live","polite")}).on("blur",function(){c.attr("aria-live","off")}));if(a.mousewheel&&b.event.special.mousewheel)c.on("mousewheel",function(a){if(c.hasClass("inited"))return 0>a.deltaY?l(q):l(t),!1});if(a.swipe){var E=0,F=0,z=!1,A=!1,u,B;c.addClass("draggable").on("mousedown touchstart",function(b){c.hasClass("inited")&&a.swipe&&(E=(A=b.clientX?!1:!0)?event.touches[0].pageX:b.clientX,F=A?event.touches[0].pageY:b.clientY,z=!0,clearInterval(r))}).on("mousemove touchmove",function(b){if(z){var d=A?event.touches[0].pageX:b.clientX;d-=E;b=A?event.touches[0].pageY:b.clientY;b-=F;u="horizontal"==a.orientation?d:b;B="horizontal"==a.orientation?"left":"top";c.find("."+a.centerClass).css(B,u/4);if(Math.abs(u)>Math.abs(b)||"vertical"==a.orientation)return!1}}).on("mouseup mouseleave touchend",function(){z&&(z=!1,B="horizontal"==a.orientation?"left":"top",c.find("."+a.centerClass).css(B,0),Math.abs(u)>a.separation/2&&(0>u?l(q):l(t)),u=0,n&&v())})}var r,n=!1;a.autoplay&&(n=a.autoplay,v());g=c.children(".arrow");a.stopOnHover&&(g=g.add(c),g=g.add(e));g.on("mousedown touchstart mousemove touchmove focus",function(){n&&clearInterval(r)}).on("mouseup mouseleave touchend blur",function(){n&&v()});c.on("jumpToPrev",function(){l(t)});c.on("jumpToNext",function(){l(q)});c.on("jumpTo",function(a,b){var c=e.eq(b-1);l(c)});c.on("play",function(a,b){b&&!n&&(n=b,v())});c.on("stop",function(){n=!1;clearInterval(r)});c.on("destroy",function(){clearInterval(r);c.removeClass("inited draggable").css(f("perspective","none"));e.removeClass(a.centerClass).css(b.extend({opacity:1,position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto"},f("transition","none"),f("transform","none")));c.children(".arrow").remove()})}function C(a){if("object"==typeof a.responsive&&0<Object.keys(a.responsive).length){var c=a.responsive,e=0,f;for(f in c)c.hasOwnProperty(f)&&window.innerWidth>=parseInt(f,10)&&(e=parseInt(f,10));return b.extend({},a,c[e])}return a}var c=b(this),e=b(this).find('[class*="item"]');y(C(x));var D=b(window).width();b(window).on("resize",function(){b(window).width()!=D&&(c.trigger("destroy"),y(C(x)),D=b(window).width())})})}})(jQuery);